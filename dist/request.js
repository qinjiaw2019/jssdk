!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("request",[],t):"object"==typeof exports?exports.request=t():e.request=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=0)}([function(e,t,n){var r=n(1);e.exports=r},function(e,t,n){n(2).code;e.exports={default:{debug:!1,baseUrl:"",token:"",timeout:5e3,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:""},_paramStringify:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return JSON.stringify(e);var n="";if(e){var r=[];Object.keys(e).forEach((function(t){return r.push(t+"="+e[t])})),-1===n.search(/\?/)?n+="?"+r.join("&"):n+="&"+r.join("&")}return n},request:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.default;return r=Object.assign(r,n),new Promise((function(n,o){if(r.timeout>0)setTimeout((function(){throw new Error("request:"+e+" timeout")}),r.timeout);e.trim().toLowerCase().startsWith("http")||(e=r.baseUrl+e);var i=r.headers["Content-Type"].trim().toLowerCase().startsWith("application/json"),u=t._paramStringify(r.params,i);i?r.body=u:(delete r.body,e+=u),fetch(e,r).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},getJson:function(e,t){var n=this;return new Promise((function(r,o){n.request(e,{params:t}).then((function(e){return e.json()})).then((function(e){return r(e)})).catch((function(e){return o(e)}))}))},get:function(e,t){return this.request(e,{params:t})},post:function(e,t){return this.request(e,{params:t,method:"POST"})},postJson:function(e,t){return this.request(e,{params:t,method:"POST",headers:{"Content-Type":"application/json"}})},upload:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{before:function(){},ready:function(){},progress:function(){},after:function(){},success:function(){},error:function(){}},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"post",o=this.default;e.trim().toLowerCase().startsWith("http")||(e=o.baseUrl+e),n.before=n.before||function(){},n.ready=n.ready||function(){},n.progress=n.progress||function(){},n.after=n.after||function(){},n.success=n.success||function(){},n.error=n.error||function(){};var i=new XMLHttpRequest;i.open(r,e,!0),n.before(i),i.onreadystatechange=function(){4==this.readyState&&(n.ready(this),200==this.status&&n.success())},i.upload.onprogress=function(e){if(e.lengthComputable){var t=100*e.loaded/e.total;n.progress(t)}},i.send(t)},uploadFile:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"file",o=new FormData;o.append(r,t),this.upload(e,o,n)},downloadFile:function(e,t){var n=this.default;return e.trim().toLowerCase().startsWith("http")||(e=n.baseUrl+e),new Promise((function(r,o){if(n.timeout>0)setTimeout((function(){throw new Error("request:"+e+" timeout")}),n.timeout);if(t){var i=new FormData;for(var u in t)i.append(u,t[u])}fetch(e,{method:"POST",body:i}).then((function(e){return e.blob().then((function(n){var r=document.createElement("a");r.style.display="none",r.href=window.URL.createObjectURL(n),filename=e.headers.get("Content-Disposition"),t.rename&&(filename=t.rename),r.download=filename,document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}))}))}))}}},function(e,t){var n={base:{debug:!1,baseUrl:"http://10.242.181.179:18085/file/system/api/v1",token:"69ce331cbc83208197749757161559ba",timeout:5e3,headers:{"Content-Type":"application/x-www-form-urlencoded"}},code:{TIMEOUT:-1,SUCCESS:0,ERROR:1}};e.exports={env:n}}])}));
//# sourceMappingURL=request.js.map